<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Centralized Userscript Installer</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f2f7ff;
        margin: 0;
        padding: 20px;
        color: #333;
    }
    h1 {
        color: #0055cc;
    }
    .card {
        background: white;
        padding: 20px;
        margin-top: 20px;
        border-radius: 10px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    button {
        padding: 12px 20px;
        border-radius: 8px;
        background: #0066ff;
        border: none;
        color: white;
        font-size: 16px;
        cursor: pointer;
        margin: 5px 0;
        width: 100%;
    }
    button:hover {
        opacity: 0.9;
    }
    .ok { color: green; font-weight: bold; }
    .fail { color: red; font-weight: bold; }
</style>
</head>

<body>

<h1>üîß Centralized Userscript Installer</h1>
<p>Gunakan halaman ini untuk menginstal sistem userscript terpusat di komputer client.</p>

<div class="card">
    <h2>1Ô∏è‚É£ Install Ekstensi Tampermonkey</h2>
    <p>Wajib diinstall sebelum script dapat berjalan.</p>

    <button onclick="window.open('https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo', '_blank');">
        Install Tampermonkey (Chrome)
    </button>

    <button onclick="window.open('https://addons.mozilla.org/en-US/firefox/addon/tampermonkey/', '_blank');">
        Install Tampermonkey (Firefox)
    </button>

    <p id="tm-status"></p>
</div>

<div class="card">
    <h2>2Ô∏è‚É£ Install Loader Script</h2>
    <p>Setelah Tampermonkey terpasang, klik tombol berikut:</p>

    <button onclick="window.open('https://raw.githubusercontent.com/cobrabagaskara/centralized-userscript-manager/main/loader/Centralized-Userscript-Loader.user.js', '_blank');">
        Install Centralized Loader
    </button>
</div>

<div class="card">
    <h2>3Ô∏è‚É£ Tes Koneksi Loader</h2>
    <button onclick="testLoader()">Tes Loader</button>
    <p id="loader-result"></p>
</div>

<div class="card">
    <h2>4Ô∏è‚É£ Tes Modul</h2>
    <button onclick="testModule()">Tes Modul auto-close-notification</button>
    <p id="module-result"></p>
</div>

<script>
// --- CEK APAKAH TAMPERMONKEY AKTIF ---
function detectTampermonkey() {
    if (typeof GM_info !== "undefined") {
        document.getElementById("tm-status").innerHTML =
            "<span class='ok'>‚úî Tampermonkey terdeteksi.</span>";
    } else {
        document.getElementById("tm-status").innerHTML =
            "<span class='fail'>‚úò Tampermonkey belum terpasang.</span>";
    }
}
detectTampermonkey();


// --- TES LOADER ---
function testLoader() {
    fetch("https://raw.githubusercontent.com/cobrabagaskara/centralized-userscript-manager/main/config.json")
        .then(r => r.json())
        .then(data => {
            document.getElementById("loader-result").innerHTML =
                "<span class='ok'>‚úî Loader dapat membaca config.json</span><br>" +
                "Modul terdaftar: " + data.modules.map(m => m.name).join(", ");
        })
        .catch(() => {
            document.getElementById("loader-result").innerHTML =
                "<span class='fail'>‚úò Loader gagal membaca config.json</span>";
        });
}


// --- TES MODUL (cek apakah file JS bisa di-load) ---
function testModule() {
    fetch("https://raw.githubusercontent.com/cobrabagaskara/centralized-userscript-manager/main/modules/auto-close-notification.js")
        .then(r => r.text())
        .then(() => {
            document.getElementById("module-result").innerHTML =
                "<span class='ok'>‚úî Modul auto-close-notification.js tersedia.</span>";
        })
        .catch(() => {
            document.getElementById("module-result").innerHTML =
                "<span class='fail'>‚úò Modul tidak ditemukan.</span>";
        });
}
</script>

</body>
</html>
